<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Data Viewer</title>
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        .section {
            border: 1px solid #ccc;
            margin: 10px;
            padding: 10px;
            width: 45%; /* Adjusted width to accommodate more content */
        }
        h2 {
            font-size: 1.2rem;
            color: #004d99;
        }
        .dict-entry {
            margin-bottom: 20px;
            padding: 5px;
            border-left: 3px solid #007bff;
            background-color: #f1f1f1;
        }
    </style>
</head>
<body>
    <h1>Explore JSON Data</h1>
    <div id="data-container" class="container">
        <!-- Dynamic data will be inserted here -->
    </div>

    <script>
        // Fetching the JSON data
        fetch('data/all_samples.json')
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('data-container');
            const categories = {};

            // Organizing data by category
            data.forEach(item => {
                if (!categories[item.category]) {
                    categories[item.category] = [];
                }
                categories[item.category].push(item);
            });

            // Displaying the categorized data
            for (let category in categories) {
                const section = document.createElement('div');
                section.className = 'section';
                section.innerHTML = `<h2>${category}</h2>`;

                categories[category].forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'dict-entry';
                    let itemContent = '';
                    
                    key == 'id'
                    itemContent += `<strong>${key}:</strong> ${Array.isArray(item[key]) ? JSON.stringify(item[key]) : item[key]}<br>`;

                    key == 'original query'
                    itemContent += `<strong>${key}:</strong> ${Array.isArray(item[key]) ? JSON.stringify(item[key]) : item[key]}<br>`;

                    key == 'tf idf score'
                    itemContent += `<strong>${key}:</strong> ${Array.isArray(item[key]) ? JSON.stringify(item[key]) : item[key]}<br>`;
                    
                    for (let key in item) {
                        if (key === 'gold_evidence' || key === 'tfidf retrieved') {
                            // Specially process the gold_evidence array to display its contents on separate lines
                            item[key].forEach((evidence, index) => {
                                itemContent += `<strong>Gold Evidence ${index+1}:</strong><br>`;
                                for (let evidKey in evidence) {
                                    itemContent += `${evidKey}: ${evidence[evidKey]}<br>`;
                                }
                            });
                        } else {
                            if (key !== 'total_likes' && key !== 'total_votes' && key !== 'correct_votes' && key !== 'id' && key !== 'label' && key !== 'tf idf score' && key !== 'label' && key !== 'original query') {
                                itemContent += `<strong>${key}:</strong> ${Array.isArray(item[key]) ? JSON.stringify(item[key]) : item[key]}<br>`;
                            }
                        }
                    }
                    itemElement.innerHTML = itemContent;
                    section.appendChild(itemElement);
                });
                container.appendChild(section);
            }
        })
        .catch(error => console.error('Error fetching JSON data:', error));
    </script>
</body>
</html>